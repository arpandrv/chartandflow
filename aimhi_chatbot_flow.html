<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIMhi Chatbot - Simplified Interaction Flow</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .diagram-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .section-title {
            font-size: 1.8rem;
            color: #2d3748;
            margin-bottom: 20px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .section-description {
            color: #4a5568;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .mermaid {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .fsm-section {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 35px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .fsm-section::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #f5576c);
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .fsm-section .section-title {
            color: #2d3748;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .fsm-section .mermaid {
            background: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
            padding: 20px;
            background: #f7fafc;
            border-radius: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-color {
            width: 30px;
            height: 30px;
            border-radius: 5px;
        }

        .info-box {
            background: #e6fffa;
            border-left: 4px solid #38b2ac;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .info-box h3 {
            color: #2c7a7b;
            margin-bottom: 10px;
        }

        .info-box p {
            color: #234e52;
            line-height: 1.6;
        }

        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .tech-item {
            background: #f7fafc;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
        }

        .tech-item h4 {
            color: #2d3748;
            margin-bottom: 5px;
        }

        .tech-item p {
            color: #4a5568;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ AIMhi Chatbot - Simplified Interaction Flow</h1>
            <p>Clear, accurate representation of how the chatbot processes messages</p>
        </div>

        <!-- Main Flow Section -->
        <div class="diagram-section">
            <h2 class="section-title">üìä Complete Message Processing Flow</h2>
            <p class="section-description">
                This diagram shows the complete journey of a user message from input to response. 
                The flow follows a strict priority order: Safety First ‚Üí State Management ‚Üí Intelligence ‚Üí Response.
            </p>
            
            <div class="mermaid">
                flowchart TB
                    START([User Types Message]) --> FLASK[Flask /chat Endpoint]
                    FLASK --> ROUTER[Message Router<br/>core/router.py]
                    
                    ROUTER --> SAVE1[Save User Message<br/>to Database<br/>‚ö†Ô∏è Not Yet Implemented]
                    SAVE1 --> NORM[Normalize Text<br/>nlp/preprocessor.py]
                    
                    NORM --> RISK{üö® Risk Detection<br/>nlp/risk_detector.py}
                    RISK -->|Crisis Detected| CRISIS[Return Crisis Resources<br/>& Support Info<br/>‚ùå Conversation Ends]
                    RISK -->|Safe| FSM[Get FSM State<br/>core/fsm.py]
                    
                    FSM --> INTENT[Intent Classification<br/>üß† DistilBERT Model]
                    INTENT --> CONF{Confidence<br/>Check}
                    CONF -->|Low Confidence| FALLBACK[Rule-Based Fallback<br/>fallbacks/rule_based_intent.py]
                    CONF -->|High Confidence| SENTIMENT
                    FALLBACK --> SENTIMENT[Sentiment Analysis<br/>Twitter-RoBERTa]
                    
                    SENTIMENT --> STATELOGIC{FSM State Logic}
                    
                    STATELOGIC -->|Welcome| WELCOME[Handle Welcome<br/>Check if ready to start]
                    STATELOGIC -->|Support People| SUPPORT[Validate Support Response<br/>Max 2 attempts]
                    STATELOGIC -->|Strengths| STRENGTHS[Validate Strengths Response<br/>Max 2 attempts]
                    STATELOGIC -->|Worries| WORRIES[Validate Worries Response<br/>Max 2 attempts]
                    STATELOGIC -->|Goals| GOALS[Validate Goals Response<br/>Max 2 attempts]
                    STATELOGIC -->|Summary| SUMMARY[Generate Summary<br/>Continue with LLM]
                    
                    WELCOME --> RESPONSE
                    SUPPORT --> RESPONSE
                    STRENGTHS --> RESPONSE
                    WORRIES --> RESPONSE
                    GOALS --> RESPONSE
                    SUMMARY --> PROFILE[Update User Profile<br/>core/user_profile.py<br/>After all FSM steps complete]
                    
                    PROFILE --> RESPONSE
                    
                    RESPONSE[Select Response<br/>nlp/response_selector.py]
                    RESPONSE --> SAVE2[Save Bot Response<br/>to Database]
                    SAVE2 --> RETURN([Return JSON Response<br/>to Frontend])
                    
                    style RISK fill:#ff6b6b,stroke:#c92a2a,stroke-width:3px,color:#fff
                    style CRISIS fill:#ff6b6b,stroke:#c92a2a,stroke-width:3px,color:#fff
                    style INTENT fill:#4ecdc4,stroke:#087f5b,stroke-width:2px
                    style SENTIMENT fill:#4ecdc4,stroke:#087f5b,stroke-width:2px
                    style FSM fill:#95d5b2,stroke:#2d6a4f,stroke-width:2px
                    style ROUTER fill:#667eea,stroke:#5f3dc4,stroke-width:3px,color:#fff
                    style SAVE1 fill:#ffd43b,stroke:#fab005,stroke-width:2px
            </div>
        </div>

        <!-- FSM States Section -->
        <div class="fsm-section">
            <h2 class="section-title">üîÑ Conversation State Machine (FSM)</h2>
            <p class="section-description">
                The chatbot follows a therapeutic 4-step model based on AIMhi Stay Strong. 
                Each state has specific validation logic and can advance after max 2 attempts if unclear.
            </p>
            
            <div class="mermaid">
                stateDiagram-v2
                    [*] --> Welcome: User starts conversation
                    
                    Welcome --> Support_People: Ready to begin<br/>(greeting/affirmation/any input)
                    Welcome --> Welcome: Not ready yet
                    
                    Support_People --> Strengths: Valid support response<br/>OR 2 attempts
                    Support_People --> Support_People: Unclear (2 attempts possible)
                    
                    Strengths --> Worries: Valid strengths response<br/>OR 2 attempts
                    Strengths --> Strengths: Unclear (2 attempts possible)
                    
                    Worries --> Goals: Valid worries response<br/>OR 2 attempts
                    Worries --> Worries: Unclear (2 attempts possible)
                    
                    Goals --> Summary: Valid goals response<br/>OR 2 attempts
                    Goals --> Goals: Unclear (2 attempts possible)
                    
                    Summary --> Summary: Continue chatting<br/>(LLM conversation mode)
                    Summary --> [*]: Continue Chat with LLM
                    
                    note right of Support_People
                        ü§ù Expected: "Who supports you?"
                        ‚Ä¢ Family, friends, community
                        ‚Ä¢ "No one" is valid
                    end note
                    
                    note right of Strengths
                        üí™ Expected: "What are you good at?"
                        ‚Ä¢ Skills, qualities, achievements
                        ‚Ä¢ "Nothing" triggers encouragement
                    end note
                    
                    note right of Worries
                        üòü Expected: "What's worrying you?"
                        ‚Ä¢ Current concerns, stress
                        ‚Ä¢ "Nothing" is valid
                    end note
                    
                    note right of Goals
                        üéØ Expected: "What are your goals?"
                        ‚Ä¢ Aspirations, next steps
                        ‚Ä¢ Can be vague or specific
                    end note
            </div>
        </div>

        <!-- Intent Classification Section -->
        <div class="diagram-section">
            <h2 class="section-title">üß† Intent Classification System</h2>
            <p class="section-description">
                The chatbot uses a hybrid approach: DistilBERT model trained on 12 intent classes, 
                with automatic rule-based fallback for low confidence predictions.
            </p>
            
            <div class="mermaid">
                flowchart LR
                    INPUT[User Message] --> BERT{DistilBERT<br/>Model}
                    BERT --> PRED[12 Intent Classes:<br/>‚Ä¢ greeting<br/>‚Ä¢ affirmation/negation<br/>‚Ä¢ question<br/>‚Ä¢ support_people/no_support<br/>‚Ä¢ strengths/no_strengths<br/>‚Ä¢ worries/no_worries<br/>‚Ä¢ goals/no_goals]
                    
                    PRED --> CHECK{Confidence > 0.5?}
                    CHECK -->|Yes| USE[Use DistilBERT<br/>Prediction]
                    CHECK -->|No| RULES[Rule-Based<br/>Fallback]
                    
                    RULES --> KEYWORDS[Check Keywords<br/>for Current State]
                    KEYWORDS --> PATTERNS[Match Patterns<br/>Based on FSM State]
                    PATTERNS --> DEFAULT[Default Intent<br/>for State]
                    
                    USE --> OUTPUT[Final Intent +<br/>Confidence Score]
                    DEFAULT --> OUTPUT
                    
                    style BERT fill:#4ecdc4,stroke:#087f5b,stroke-width:2px
                    style CHECK fill:#ffd43b,stroke:#fab005,stroke-width:2px
                    style RULES fill:#ff8787,stroke:#fa5252,stroke-width:2px
            </div>

            <div class="info-box">
                <h3>üìà Model Performance</h3>
                <p>
                    <strong>RoBERTa Large MNLI ONNX INT8 Accuracy:</strong> 79.5% on random dataset (Access dataset at the end of this page)<br/>
                    <strong>Inference Time:</strong> ~1.6 seconds per classification on CPU (can be significantly faster on GPU)<br/>
                    <strong>Model Size:</strong> 350MB (INT8 quantized)<br/>
                    <strong>Fallback Usage:</strong> For messages with lower confidence than 0.5
                </p>
            </div>
        </div>

        <!-- Sentiment Analysis Section -->
        <div class="diagram-section">
            <h2 class="section-title">üí≠ Sentiment Analysis System</h2>
            <p class="section-description">
                The chatbot uses Twitter-RoBERTa model for emotion detection to understand user's emotional state 
                and adjust responses accordingly. Includes fallback mechanisms for model failures.
            </p>
            
            <div class="mermaid">
                flowchart LR
                    INPUT[User Message] --> TWITTER{Twitter-RoBERTa<br/>Model}
                    TWITTER --> PRED[3 Sentiment Classes:<br/>‚Ä¢ positive<br/>‚Ä¢ negative<br/>‚Ä¢ neutral]
                    
                    PRED --> CONF_CHECK{Model<br/>Available?}
                    CONF_CHECK -->|Yes| SCORE[Sentiment Scores<br/>+ Confidence]
                    CONF_CHECK -->|No/Error| FALLBACK[Neutral Fallback<br/>Default Processing]
                    
                    SCORE --> THRESHOLD{Confidence > 0.6?}
                    THRESHOLD -->|Yes| USE_SENTIMENT[Use Sentiment<br/>for Response Tone]
                    THRESHOLD -->|No| FALLBACK
                    
                    USE_SENTIMENT --> TONE[Adjust Response:<br/>‚Ä¢ Encouraging for negative<br/>‚Ä¢ Enthusiastic for positive<br/>‚Ä¢ Standard for neutral]
                    FALLBACK --> NEUTRAL[Neutral Tone<br/>Standard Response]
                    
                    TONE --> OUTPUT[Enhanced Response<br/>with Emotional Context]
                    NEUTRAL --> OUTPUT
                    
                    style TWITTER fill:#1da1f2,stroke:#0d8bd9,stroke-width:2px,color:#fff
                    style CONF_CHECK fill:#ffd43b,stroke:#fab005,stroke-width:2px
                    style FALLBACK fill:#ff8787,stroke:#fa5252,stroke-width:2px
                    style TONE fill:#51cf66,stroke:#37b24d,stroke-width:2px
            </div>

            <div class="info-box">
                <h3>üìä Sentiment Model Performance</h3>
                <p>
                    <strong>Model:</strong> Twitter-RoBERTa-base for Sentiment Classification<br/>
                    <strong>Training Data:</strong> Twitter sentiment dataset<br/>
                    <strong>Inference Time:</strong> Not Measured<br/>
                    <strong>Model Size:</strong> 500MB (full precision)<br/>
                    <strong>Fallback Strategy:</strong> Neutral sentiment when model unavailable or low confidence<br/>
                    <strong>Integration:</strong> Runs after intent classification in NLP pipeline
                </p>
            </div>

            <div class="info-box">
                <h3>üé≠ Sentiment-Response Mapping</h3>
                <p>
                    <strong>Negative:</strong> More empathetic language, validation of feelings, encouraging support<br/>
                    <strong>Positive:</strong> Enthusiastic support, positive reinforcement, celebratory tone<br/>
                    <strong>Neutral:</strong> Standard therapeutic responses, balanced approach<br/>
                    <strong>Fallback:</strong> Always defaults to supportive, safe language when model unavailable
                </p>
            </div>
        </div>

        <!-- Component Architecture Section -->
        <div class="diagram-section">
            <h2 class="section-title">üèóÔ∏è System Architecture</h2>
            <p class="section-description">
                <strong>Sequential Processing Flow:</strong> Every request follows a strict sequential path with no concurrent processing.
                <br><br>
                <strong>Process:</strong> Frontend ‚Üí Flask entry (app.py) ‚Üí Session retrieval (session.py) ‚Üí FSM creation (fsm.py) ‚Üí Message routing (router.py) ‚Üí NLP pipeline (5 sequential steps) ‚Üí FSM state check ‚Üí Loop until all states complete ‚Üí User profile update ‚Üí Response
            </p>
            
            <div class="mermaid">
                flowchart TD
                    subgraph "Frontend Layer"
                        JS[script.js<br/>AJAX Request]
                    end
                    
                    subgraph "Flask Backend Layer"
                        APP[app.py<br/>Entry Point /chat]
                        SESSION[session.py<br/>Get/Create Session]
                        FSM_INIT[fsm.py<br/>Instantiate ChatBotFSM]
                        ROUTER[router.py<br/>route_message function]
                    end
                    
                    subgraph "NLP Pipeline - Sequential Processing"
                        NORM[1. normalize_text<br/>preprocessor.py]
                        RISK[2. contains_risk<br/>risk_detector.py]
                        INTENT[3. classify_intent<br/>intent_distilbert.py]
                        SENTIMENT[4. analyze_sentiment<br/>sentiment.py]
                        RESP[5. get_response<br/>response_selector.py]
                    end
                    
                    subgraph "State Management"
                        FSM_STATE[FSM State Logic<br/>Check current state<br/>Validate response<br/>Transition states]
                        LOOP{All FSM<br/>States<br/>Complete?}
                    end
                    
                    subgraph "Post-Processing"
                        PROFILE[user_profile.py<br/>Update after all states done]
                        DB[(SQLite DB<br/>Not yet implemented)]
                    end
                    
                    JS -->|POST /chat| APP
                    APP -->|1. Get session| SESSION
                    SESSION -->|2. Create/retrieve FSM| FSM_INIT
                    FSM_INIT -->|3. Return to app.py| APP
                    APP -->|4. Call router| ROUTER
                    
                    ROUTER -->|5a. Normalize| NORM
                    NORM -->|5b. Check risk| RISK
                    RISK -->|If safe, 5c| INTENT
                    RISK -.->|If crisis detected| CRISIS_END([Return Crisis Response<br/>END FLOW])
                    INTENT -->|5d. Analyze| SENTIMENT
                    SENTIMENT -->|5e. Check FSM| FSM_STATE
                    FSM_STATE -->|5f. Generate| RESP
                    RESP --> LOOP
                    
                    LOOP -->|No - Continue| ROUTER
                    LOOP -->|Yes - Complete| PROFILE
                    PROFILE --> DB
                    DB --> RETURN([Return JSON to Frontend])
                    
                    style ROUTER fill:#667eea,stroke:#5f3dc4,stroke-width:3px,color:#fff
                    style RISK fill:#ff6b6b,stroke:#c92a2a,stroke-width:3px,color:#fff
                    style LOOP fill:#ffd43b,stroke:#fab005,stroke-width:3px
                    style APP fill:#4ecdc4,stroke:#087f5b,stroke-width:2px
                    style FSM_STATE fill:#95d5b2,stroke:#2d6a4f,stroke-width:2px
            </div>

            <div class="info-box">
                <h3>üîÑ Message Processing Loop Detail</h3>
                <p>
                    <strong>Loop Mechanism:</strong> The router.py continues processing messages through the NLP pipeline until all FSM states are complete:<br><br>
                    ‚Ä¢ <strong>Iteration 1:</strong> Welcome state ‚Üí User responds ‚Üí Process through pipeline ‚Üí Move to Support state<br>
                    ‚Ä¢ <strong>Iteration 2:</strong> Support state ‚Üí User responds ‚Üí Process through pipeline ‚Üí Move to Strengths state<br>
                    ‚Ä¢ <strong>Iteration 3:</strong> Strengths state ‚Üí User responds ‚Üí Process through pipeline ‚Üí Move to Worries state<br>
                    ‚Ä¢ <strong>Iteration 4:</strong> Worries state ‚Üí User responds ‚Üí Process through pipeline ‚Üí Move to Goals state<br>
                    ‚Ä¢ <strong>Iteration 5:</strong> Goals state ‚Üí User responds ‚Üí Process through pipeline ‚Üí Move to Summary state<br>
                    ‚Ä¢ <strong>Final:</strong> Summary state ‚Üí FSM complete ‚Üí Update user profile ‚Üí Continue with LLM
                </p>
            </div>

            <div class="tech-stack">
                <div class="tech-item">
                    <h4>üî¥ Risk Detection</h4>
                    <p>SpaCy PhraseMatcher with 50+ crisis patterns</p>
                </div>
                <div class="tech-item">
                    <h4>üü° State Machine</h4>
                    <p>Python transitions library for FSM</p>
                </div>
                <div class="tech-item">
                    <h4>üü¢ Intent Model</h4>
                    <p>Roberta-large-mnli</p>
                </div>
                <div class="tech-item">
                    <h4>üîµ Sentiment</h4>
                    <p>Twitter-RoBERTa for emotion detection</p>
                </div>
                <div class="tech-item">
                    <h4>üü£ Database</h4>
                    <p>SQLite for anonymous chat history</p>
                </div>
                <div class="tech-item">
                    <h4>‚ö™ Web Framework</h4>
                    <p>Flask with Bootstrap UI</p>
                </div>
            </div>
        </div>

        <!-- Decision Priority Section -->
        <div class="diagram-section">
            <h2 class="section-title">‚ö° Decision Priority</h2>
            <p class="section-description">
                The system follows a strict priority order for processing messages.
            </p>
            
            <div class="mermaid">
                flowchart LR
                    subgraph "Priority 1: Safety"
                        R1[Risk Detection]
                    end
                    
                    subgraph "Priority 2: State"
                        R2[FSM State Check]
                    end
                    
                    subgraph "Priority 3: Understanding"
                        R3[Intent Classification]
                        R4[Sentiment Analysis]
                    end
                    
                    subgraph "Priority 4: Response"
                        R5[Response Selection]
                        R6[Database Save]
                    end
                    
                    R1 --> R2
                    R2 --> R3
                    R3 --> R4
                    R4 --> R5
                    R5 --> R6
                    
                    style R1 fill:#ff6b6b,stroke:#c92a2a,stroke-width:3px
            </div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #ff6b6b;"></div>
                    <span><strong>Critical Path:</strong> Risk detection always runs first</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #95d5b2;"></div>
                    <span><strong>State Logic:</strong> FSM manages conversation flow</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #4ecdc4;"></div>
                    <span><strong>AI Models:</strong> Roberta-large-mnli + Twitter-RoBERTa for understanding</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #667eea;"></div>
                    <span><strong>Orchestration:</strong> Router coordinates all components</span>
                </div>
            </div>
        </div>

        <!-- Key Features Section -->
        <div class="diagram-section">
            <h2 class="section-title">‚ú® Key System Features</h2>
            
            <div class="info-box">
                <h3>üõ°Ô∏è Safety First Design</h3>
                <p>
                    ‚Ä¢ Deterministic crisis detection runs before any AI processing<br/>
                    ‚Ä¢ Immediate crisis resources provided when risk detected<br/>
                    ‚Ä¢ No machine learning gating of safety responses<br/>
                    ‚Ä¢ All responses filtered through safety guardrails
                </p>
            </div>

            <div class="info-box">
                <h3>üéØ Smart Intent Classification</h3>
                <p>
                    ‚Ä¢ Primary: Roberta-large-mnli model (79.5% accuracy)<br/>
                    ‚Ä¢ Fallback: Rule-based system for low confidence<br/>
                    ‚Ä¢ Context-aware: Uses current FSM state<br/>
                    ‚Ä¢ 12 intent classes covering all conversation needs
                </p>
            </div>

            <div class="info-box">
                <h3>üîÑ Graceful Conversation Flow</h3>
                <p>
                    ‚Ä¢ Maximum 2 attempts per state before auto-advance<br/>
                    ‚Ä¢ Handles "no support", "no strengths" empathetically<br/>
                    ‚Ä¢ Varied responses to avoid repetition<br/>
                    ‚Ä¢ Natural progression through 4-step therapeutic model
                </p>
            </div>

            <div class="info-box">
                <h3>üöÄ Performance Optimized</h3>
                <p>
                    ‚Ä¢ Total response time: Not measured<br/>
                    ‚Ä¢ Roberta-large-mnli inference: ~1.6 seconds (On CPU)<br/>
                </p>
            </div>
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#667eea',
                primaryTextColor: '#fff',
                primaryBorderColor: '#5f3dc4',
                lineColor: '#5c7cfa',
                secondaryColor: '#4ecdc4',
                tertiaryColor: '#95d5b2',
                background: '#ffffff',
                mainBkg: '#ffffff',
                secondBkg: '#f8f9fa',
                tertiaryBkg: '#e9ecef'
            },
            flowchart: {
                htmlLabels: true,
                curve: 'basis',
                nodeSpacing: 50,
                rankSpacing: 50,
                padding: 20,
                useMaxWidth: true
            },
            stateDiagram: {
                dividerMargin: 10,
                sizeUnit: 5,
                padding: 8,
                textHeight: 10,
                titleShift: -15,
                noteMargin: 10,
                forkWidth: 70,
                forkHeight: 7,
                miniPadding: 2,
                fontSizeFactor: 5,
                fontSize: 24,
                labelHeight: 16,
                edgeLengthFactor: '20',
                compositTitleSize: 35,
                radius: 5
            }
        });
    </script>
</body>
</html>